{% extends "base.html" %}

{% block content %}
  <h1>
    Guilds
    <a href="{% url 'LFTplatform:guild-create' %}"
       class="btn btn-primary link-to-page">
      Create
    </a>
  </h1>
  {% if guild_list %}
    {% include "includes/search_form.html" %}

    <table class="table">
      <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col">Guild</th>
        <th scope="col">Faction</th>
        <th scope="col">Highest Progress</th>
        <th scope="col">Looking for</th>
        <th scope="col">WCL Link</th>
        <th scope="col">Teams</th>
      </tr>
      </thead>
      <tbody>
      {% for guild in guild_list %}
        <tr>
          <th scope="row">{{ forloop.counter }}</th>
          <td><a
              href="{% url "LFTplatform:guild-detail" pk=guild.id %}">{{ guild.guild_name }}</a>
          </td>
          <td>{{ guild.faction }}</td>
          <td>{{ guild.highest_progress }}</td>
          <td>
            <ul>
              {% for guild_id, specs in required_specs.items %}
                {% for class_name, spec_name in specs %}
                  <li>{{ class_name }} - {{ spec_name }}</li>
                {% endfor %}
              {% endfor %}
            </ul>
          </td>
          <td>{{ guild.wcl_link }}</td>
          <td>
            <ul>
              {% for team in guild.teams.all %}
                <li><a
                    href="{% url "LFTplatform:team-detail" pk=team.id %}">{{ team.team_name }}</a>
                </li>
                <ul>

                </ul>
              {% empty %}
                No teams available
              {% endfor %}
            </ul>
          </td>
        </tr>
      {% endfor %}
      </tbody>
    </table>


  {% else %}
    <p>No guilds found ;( </p>
  {% endif %}
  https://gist.github.com/ve3/42280abc22579b45e12c37403c8d8c6f
{% endblock %}
